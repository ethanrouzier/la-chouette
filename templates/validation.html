<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Chouette - Validation</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/validation.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo-container">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="La Chouette" class="logo">
                <h1>La Chouette</h1>
            </div>
            <div class="header-actions">
                <button id="api-config-btn" class="btn btn-secondary btn-sm">
                    <span class="btn-icon">ðŸ”‘</span>
                    Configuration API
                </button>
            </div>
            <p class="subtitle">Structuration de DonnÃ©es - Ã‰tape 5 : Validation</p>
        </header>

        <!-- Navigation des Ã©tapes -->
        <nav class="steps-nav">
            <div class="step" onclick="window.location.href='/'">
                <span class="step-number">1</span>
                <span class="step-title">Import des Documents</span>
            </div>
            <div class="step" onclick="window.location.href='/categorization'">
                <span class="step-number">2</span>
                <span class="step-title">CatÃ©gorisation</span>
            </div>
            <div class="step" onclick="window.location.href='/field-selection'">
                <span class="step-number">3</span>
                <span class="step-title">Choix des Champs</span>
            </div>
            <div class="step" onclick="window.location.href='/extraction'">
                <span class="step-number">4</span>
                <span class="step-title">Extraction</span>
            </div>
            <div class="step active">
                <span class="step-number">5</span>
                <span class="step-title">Validation</span>
            </div>
        </nav>

        <!-- ContrÃ´les principaux -->
        <div class="validation-controls">
            <div class="control-panel">
                <h3>ContrÃ´les de validation</h3>
                <div class="control-options">
                    <button id="export-excel-btn" class="btn btn-outline">
                        <span class="btn-icon">ðŸ“Š</span>
                        Export Excel
                    </button>
                    <button id="export-csv-btn" class="btn btn-outline">
                        <span class="btn-icon">ðŸ“‹</span>
                        Export CSV
                    </button>
                    <button id="save-changes-btn" class="btn btn-primary">
                        <span class="btn-icon">ðŸ’¾</span>
                        Sauvegarder les modifications
                    </button>
                    <button id="reset-all-btn" class="btn btn-danger">
                        <span class="btn-icon">ðŸ”„</span>
                        RÃ©initialiser tout
                    </button>
                </div>
            </div>
        </div>

        <!-- SÃ©lection du document -->
        <div class="document-selection">
            <div class="selection-panel">
                <h3>SÃ©lection du document</h3>
                <div class="document-list" id="document-list">
                    <!-- Liste des documents -->
                </div>
            </div>
        </div>

        <!-- Interface de validation -->
        <div class="validation-interface" id="validation-interface" style="display: none;">
            <div class="validation-layout">
                <!-- Texte du document -->
                <div class="document-text-panel">
                    <div class="panel-header">
                        <h3>Texte du document</h3>
                        <div class="document-info">
                            <span id="document-title"></span>
                            <span id="document-category"></span>
                        </div>
                    </div>
                    <div class="document-content" id="document-content">
                        <!-- Contenu du document avec surlignage -->
                    </div>
                </div>

                <!-- Champs extraits -->
                <div class="extracted-fields-panel">
                    <div class="panel-header">
                        <h3>Champs extraits</h3>
                        <button id="ai-justification-btn" class="btn btn-secondary btn-sm">
                            <span class="btn-icon">ðŸ¤–</span>
                            Justification IA
                        </button>
                    </div>
                    <div class="fields-container" id="fields-container">
                        <!-- Champs extraits avec possibilitÃ© de modification -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal de confirmation de rÃ©initialisation -->
        <div class="modal" id="reset-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Confirmation de rÃ©initialisation</h3>
                    <button class="modal-close" id="close-reset-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <p>ÃŠtes-vous sÃ»r de vouloir rÃ©initialiser complÃ¨tement l'application ?</p>
                    <p><strong>Cette action supprimera :</strong></p>
                    <ul>
                        <li>Tous les documents importÃ©s</li>
                        <li>Le catalog des champs</li>
                        <li>Les catÃ©gories crÃ©Ã©es</li>
                        <li>Les champs extraits</li>
                    </ul>
                    <p><strong>Cette action est irrÃ©versible !</strong></p>
                </div>
                <div class="modal-footer">
                    <button id="confirm-reset" class="btn btn-danger">Confirmer la rÃ©initialisation</button>
                    <button id="cancel-reset" class="btn btn-secondary">Annuler</button>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/validation.js') }}"></script>
    <script src="{{ url_for('static', filename='js/api_config.js') }}"></script>
</body>
</html>
